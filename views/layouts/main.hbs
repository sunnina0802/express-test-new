<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <meta name="description" content="">
    <base href="/">
   <title>node</title>
    <link rel="stylesheet" href="vendor/jquery-ui/themes/base/jquery-ui.min.css">
    <link rel="stylesheet" href="vendor/bootstrap/dist/css/bootstrap.min.css">

    <link rel="stylesheet" href="vendor/animate/animate.min.css">
    <link rel="stylesheet" href="vendor/highcharts/css/highcharts.css">

    <link rel="stylesheet" href="stylesheets/sprites-china.css">
    <link rel="stylesheet" href="stylesheets/index-1.css">

    <style>
        .adfin{
            width:180px;
            display: inline-block;
        }
        #captchaImg{
            display: inline-block;
        }
    </style>
    {{{_sections.head}}}
</head>
<body>



<header>

    <!-- Fixed navbar -->
    <!--<nav class="navbar navbar-default navbar-fixed-top" role="navigation">-->
        <!--<div class="container">-->
            <!--<div class="navbar-header">-->
                <!--<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">-->
                    <!--<span class="sr-only">Toggle navigation</span>-->
                    <!--<span class="icon-bar"></span>-->
                    <!--<span class="icon-bar"></span>-->
                    <!--<span class="icon-bar"></span>-->
                <!--</button>-->
                <!--<a class="navbar-brand" href="/">home design</a>-->
            <!--</div>-->
            <!--<div class="collpse navbar-collapse" id="demo-navbar">-->
                <!--<ul class="nav navbar-nav">-->
                    <!--<li><a href="/contact">home decoration</a></li>-->
                    <!--<li><a href="/about">The office</a></li>-->
                    <!--<li class="dropdown">-->
                        <!--<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Room Style <span class="caret"></span></a>-->
                        <!--<ul class="dropdown-menu">-->
                            <!--<li><a href="#tab-chrome">bedroom</a></li>-->
                            <!--<li><a href="#tab-firefox">shower room</a></li>-->
                            <!--<li><a href="#tab-opera">drawing room</a></li>-->
                            <!--<li><a href="#tab-safari">kitchen</a></li>-->
                            <!--<li><a href="#tab-ie">dining room</a></li>-->
                        <!--</ul>-->
                    <!--<li><a href="#">The custom center</a></li>-->
                    <!--</li>-->
                <!--</ul>-->
                <!--<ul class="nav navbar-nav navbar-right">-->
                    <!--<li><a href="#"  data-toggle="modal" data-target="#signIn">Sign in</a></li>-->

                    <!--<li><a href="#" data-toggle="modal" data-target="#signUp">Sign up</a></li>-->
                <!--</ul>-->
            <!--</div>-->
        <!--</div>-->
    <!--</nav>-->
{{>navigation}}

</header>


<div id="myCarousel" class="carousel slide" data-ride="carousel">
    <!-- Indicators -->
    <ol class="carousel-indicators">
        <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
        <li data-target="#myCarousel" data-slide-to="1"></li>
        <li data-target="#myCarousel" data-slide-to="2"></li>
    </ol>
    <div class="carousel-inner" role="listbox">
        <div class="item active">
            <img class="first-slide" src="images/pexels-photo-395132.jpeg" alt="First slide">
            <div class="container">
                <div class="carousel-caption">
                    <h1>Creative inspiration</h1>
                    <p>We don't believe there will be perfect home, but we believe that the home can be perfect for the style of the house owner.</p>
                    <p><a class="btn btn-lg btn-primary" href="#" role="button">Learn more</a></p>
                </div>
            </div>
        </div>
        <div class="item">
            <img class="second-slide" src="images/t1.jpg" alt="Second slide">
            <div class="container">
                <div class="carousel-caption">
                    <h1>Creative inspiration</h1>
                    <p>In the home, all styles and functions can be designed according to your preferences and needs, and it won't cost too much to make you feel comfortable</p>
                    <p><a class="btn btn-lg btn-primary" href="#" role="button">Learn more</a></p>
                </div>
            </div>
        </div>
        <div class="item">
            <img class="third-slide" src="images/pexels-photo-380769.jpeg" alt="Third slide">
            <div class="container">
                <div class="carousel-caption">
                    <h1>Create space for business development</h1>
                    <p>All for your business development smart way to build smarter enterprises</p>
                    <p><a class="btn btn-lg btn-primary" href="#" role="button">Learn more</a></p>
                </div>
            </div>
        </div>
    </div>
    <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
</div>

<!-- /.carousel -->
<main class="container ">

    {{{body}}}

</main>



<footer>
    <a href="#top">平滑顶部</a>
    <div id="footer">
        <div class="container">
            <div class="row">
                <div class="col-md-3">
                    <h3 class="section-title">About Words</h3>
                    <p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts. Separated they live in Bookmarksgrove right at the coast of the Semantics.</p>
                </div>

                <div class="col-md-3 col-md-push-1">
                    <h3 class="section-title">Links</h3>
                    <ul>
                        <li><a href="#">Home</a></li>
                        <li><a href="#">Work</a></li>
                        <li><a href="#">About</a></li>
                        <li><a href="#">Blog</a></li>
                        <li><a href="#">API</a></li>
                        <li><a href="#">FAQ / Contact</a></li>
                    </ul>
                </div>

                <div class="col-md-3">
                    <h3 class="section-title">Information</h3>
                    <ul>
                        <li><a href="#">Terms &amp; Condition</a></li>
                        <li><a href="#">License</a></li>
                        <li><a href="#">Privacy &amp; Policy</a></li>
                        <li><a href="#">Contact Us</a></li>
                    </ul>
                </div>
                <div class="col-md-3">
                    <h3 class="section-title">Newsletter</h3>
                    <p>Subscribe for our newsletter</p>
                    <form class="form-inline" id="fh5co-header-subscribe">
                        <div class="row">
                            <div class="col-md-12 col-md-offset-0">
                                <div class="form-group">
                                    <input type="text" class="form-control" id="email" placeholder="Enter your email">
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <div class="row copy-right">
                <div class="col-md-6 col-md-offset-3 text-center">
                    <ul class="share">
                        <li class="douban"></li>
                        <li class="xlwb-2"></li>
                        <li class="zf-2"></li>
                        <li class="wx-2"></li>
                        <li class="github"></li>
                    </ul>
                    <p>Copyright 2016 Free Html5 <a href="#">Words</a>. All Rights Reserved. <br>Made with <i class="icon-heart3"></i> by <a href="http://freehtml5.co/" target="_blank">Freehtml5.co</a> / Demo Images: <a href="http://blog.gessato.com/" target="_blank">Gessato</a></p>
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- Modal -->
<div class="modal fade" id="signIn" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" >登录</h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal"
                      action="/users/sign-in"
                      method="POST"
                      id="signinform">
                    <div class="form-group">
                        <label for="certain" class="col-sm-2 control-label" >验证码</label>
                        <div class="col-sm-10">
                            <input type="text"
                                   name="captcha"
                                   class="form-control adfin"
                                   id="in-captcha"
                                   placeholder="请填写图片中的验证码">
                            <img src="/captcha" alt="" id="captchaImgin" onclick="getCaptchain()">
                            <span class="change" onclick="getCaptcha()">看不清楚，换一张</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="inputEmail3" class="col-sm-2 control-label">手机号码</label>
                        <div class="col-sm-10">
                            <input type="number"
                                   name="tel"
                                   class="form-control"
                                   id="in-tel"
                                   placeholder="phone">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="inputPassword3" class="col-sm-2 control-label">密码</label>
                        <div class="col-sm-10">
                            <input type="password"
                                   name="password"
                                   class="form-control"
                                   id="in-password"
                                   placeholder="Password">
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button type="button"
                                class="btn btn-default"
                                data-dismiss="modal">Close</button>
                        <button type="submit"
                                class="btn btn-primary">Sign In</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<!-- Modal -->
<div class="modal fade" id="signUp" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button"
                        class="close"
                        data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" >注册</h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal"
                      action="/users/sign-up"
                      method="POST"
                      id="signupform">

                    <div class="form-group">
                        <label for="tel" class="col-sm-2 control-label">手机号码</label>
                        <div class="col-sm-10">
                            <input type="tel"
                                   name="tel"
                                   class="form-control"
                                   id="tel"
                                   placeholder="tel">
                            <div id="ErrorMsg" style="color: red"></div>
                        </div>
                    </div>

                    <div class="form-group" id="wait" style="display:none;width:69px;height:89px;border:1px solid black;position:absolute;top:50%;left:50%;padding:2px;">
                        <img src='images/demo_wait.gif' width="64" height="64" />
                        <br />Loading ...
                    </div>

                    <div class="form-group">
                        <label for="inputPassword" class="col-sm-2 control-label">密码</label>
                        <div class="col-sm-10">
                            <input type="password"
                                   name="password"
                                   class="form-control"
                                   id="inputPassword"
                                   placeholder="Password" >
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="inputPassword3" class="col-sm-2 control-label">确认密码</label>
                        <div class="col-sm-10">
                            <input type="password"
                                   name="confirm"
                                   class="form-control"
                                   id="inputConfirm"
                                   placeholder="Password">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="certain" class="col-sm-2 control-label" >验证码</label>
                        <div class="col-sm-10">
                            <input type="text"
                                   name="captcha"
                                   class="form-control adfin"
                                   id="captcha"
                                   placeholder="请填写图片中的验证码">
                            <img src="/captcha" alt="" id="captchaImg" onclick="getCaptcha()">
                            <span class="change" onclick="getCaptcha()">看不清楚，换一张</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <div id="comp"></div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                        <button type="button" class="btn btn-primary" onclick="checkData()">注册</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>





    <script src="vendor/jquery/dist/jquery.min.js"></script>
    <script src="vendor/jquery-ui/jquery-ui.min.js"></script>
    <script src="vendor/bootstrap/dist/js/bootstrap.min.js"></script>

    <script src="vendor/highcharts/highcharts.js"></script>
    <script src="vendor/highcharts/modules/exporting.js"></script>
    <script src="vendor/highcharts/modules/data.js"></script>
    <script src="vendor/highcharts/modules/drilldown.js"></script>
    <script src="vendor/validator/validator.min.js"></script>
    {{{_sections.customjs}}}



<script>
function getCaptcha() {
    var captchaUrl = '/captcha?t='+Date.now()+Math.random();
    $('#captchaImg').attr('src',captchaUrl);
}

function getCaptchain() {
    var captchaUrl = '/captcha?t='+Date.now()+Math.random();
    $('#captchaImgin').attr('src',captchaUrl);
}



function checkSignIn() {

    var ret = true;
    if(!validator.isMobilePhone($("#in-tel").val(), 'zh-CN'))
    {
        ret=false;
        alert('手机号码格式错误，请重新输入');
        $("#in-tel").focus();
    }

    else if(!validator.isLength($("#in-password").val(),{min:6,max:8} ))
    {
        ret=false;
        alert('密码格式有误，请重新输入');
        $("#in-password").focus();
    }

    if(ret){
        signIn();
    }
}

function signIn() {
    var para  = $("#signinform").serialize();
    $.ajax({
        url:'/users/sign-in',
        type: 'POST',
        async:true,
        data:para,
        success: function(res)
        {
            if(res.captchaErrorMsg)
            {
                $("#ErrorMsg,#ErrorMsg-panle").show();
                $("#ErrorMsg").html(res.captchaErrorMsg);
            }

            if(parseInt(res.code)==1)
            {
                window.location.href=res.url;
            }
        }
    });
}



function checkData() {
        var ret = true;
        if(!validator.isMobilePhone($("#tel").val(), 'zh-CN'))
        {
            ret=false;
            alert('手机号码格式错误，请重新输入');
            $("#tel").focus();
        }

        else if(!validator.isLength($("#inputPassword").val(),{min:6,max:8} ))
        {
            ret=false;
            alert('密码格式有误，请重新输入');
            $("#inputPassword").focus();
        }
       else if(!validator.equals($("#inputPassword").val(),$("#inputConfirm").val()))
        {
            ret=false;
            alert('两次密码输入不一致，请重新输入');
            $("#inputConfirm").focus();
        }
        //return ret;
        if(ret){
            signup();
        }
    }


function signup() {
    var para  = $("#signupform").serialize();
    $.ajax({
        url:'/users/sign-up',
        type: 'POST',
        async:true,
        data:para,
        success: function(res)
        {
            if(res.captchaErrorMsg)
            {
                $("#ErrorMsg,#ErrorMsg-panle").show();
                $("#ErrorMsg").html(res.captchaErrorMsg);
            }

            if(parseInt(res.code)==1)
            {
                window.location.href=res.url;
            }
        }
    });
}






$(function () {
    $('#ErrorMsg,#ErrorMsg-panle').hide();
    $('#tel').blur(function () {
        $("#wait").css('display','block');
        setTimeout('checkPhone()',1500);
   });
});


    function checkPhone() {
        var para  = 'tel='+$("#tel").val();

        //alert(para);

        $.ajax({
            url:'/users/check-phone',
            type: 'POST',
            async:true,
            data:para,
            success: function(res)
            {
                if(res.errorMsg)
                {

                    //alert(res.errorMsg);
                    $("#ErrorMsg,#ErrorMsg-panle").show();
                    $("#ErrorMsg").html(res.errorMsg);
                    $("#tel").val('');
                    $("#tel").focus();
                }else {
                    $("#ErrorMsg,#ErrorMsg-panle").hide();
                }
            }
        });
    }

$(document).ajaxError(function(){
    $("div#comp").html("<p>ajax送信失败！</p>").css("color","red");
});

$(document).ajaxComplete(function(){
    $("#wait").css("display","none");
});



</script>


<script>
    $("a[href='#top']").click(function() {
        $("html, body").animate({ scrollTop: 0 }, "slow");
        return false;
    });
</script>
</body>
</html>